# Samba 配置

```
#
# Please Contact QQ: XXXXXX If You Wish to Change the SMB Server Configuration.
#======================= Global Settings =======================
[global]
	# Support for Windows
    	wins support = yes
	workgroup = WORKGROUP
	netbios name = UBUNTU
	# SMB Server Features
	server string = Welcome to Cheese's Cloud Driver!
	# Support for Any FileSystem
	preserve case = yes
	short preserve case =yes
	mangled names = no
	# SMB Server Security
	security = user
	guest account = nobody

#### Networking ####
	# Bind SMB Server Interfaces
	# Please Contact QQ: XXXXXX If You Wish to Change the SMB Server Configuration.
	interfaces = 192.168.1.111 eth0
	# Bind SMB Server Interfaces Only
	bind interfaces only = yes



#### Debugging/Accounting ####
	log file = /opt/Cloud/Logs/debug-%m.log
	# Max Log Size(KiB)
	max log size = 1000
	logging = file
	# Do something sensible when Samba crashes: mail the admin a backtrace (Keep Default)
	panic action = /usr/share/samba/panic-action %d


####### Authentication #######
	# Server Role
	server role = standalone server
	obey pam restrictions = yes
	unix password sync = yes
	passwd program = /usr/bin/passwd %u
	passwd chat = *Enter\snew\s*\spassword:* %n\n *Retype\snew\s*\spassword:* %n\n *password\supdated\ssuccessfully* .
	pam password change = yes
	map to guest = bad user

########## Domains ###########
############ Misc ############
   usershare allow guests = yes

#======================= Share Definitions =======================
[Cheese's Cloud]
# Common Configuration
comment = Cheese 的云盘文件夹
path = /opt/Cloud/CoCo
# Security Configuration
browseable = yes
public = yes
guest ok = yes
read only = yes
# Security Manager
write list = cheese

[Cheese's Dashboard]
# Common Configuration
comment = Cheese 的云盘文件夹
path = /opt/Cloud/Dashboard
# Security Configuration
browseable = yes
public = yes
guest ok = yes
writable = yes
# Security Manager
# write list = cheese
```

# DNS 缓存服务器

named.conf.options

```
options {
    directory "/var/cache/bind";

    // 监听所有网络接口
    listen-on { any; };
    listen-on-v6 { any; };

    // 允许查询的网络
    allow-query { any; };

    // 启用递归查询
    recursion yes;

    // 递归查询的客户端
    allow-recursion { any; };

    // 关闭DNSSEC验证
    dnssec-validation no;

    // 不返回NXDOMAIN
    auth-nxdomain no;

    // 设置缓存大小
    max-cache-size 512m;  // 512MB

    // 设置缓存记录的最大存活时间
    max-cache-ttl 43200;  // 12 小时

    // 设置缓存记录的最小存活时间
    min-cache-ttl 60;  // 1 分钟

    // 设置转发器
    forward first;
    forwarders {
        119.29.29.29;  // China Mobile DNS
        182.254.116.116;  // Baidu DNS
        180.76.76.76;  // Aliyun DNS
        8.8.8.8;  // Google Public DNS
        8.8.4.4;  // Google Public DNS
        223.5.5.5;  // Tencent DNS
        208.67.222.222;  // OpenDNS
    };

    //========================================================================
    // 如果BIND记录了关于根密钥过期的错误消息，您需要更新您的密钥。
    // 请参阅 https://www.isc.org/bind-keys
    //========================================================================
};
```

named.conf.local

```
//
// Do any local configuration here
//

// Consider adding the 1918 zones here, if they are not used in your
// organization
//include "/etc/bind/zones.rfc1918";
// zone "cc" {
//     type master;
//     file "/etc/bind/cc.conf";
// };

zone "github.com" {
    type master;
    file "/etc/bind/github.com.conf";
};
```

named.conf

```
// vim:set ts=4 sw=4 et:

options {
    directory "/var/named";
    pid-file "/run/named/named.pid";

    // Uncomment these to enable IPv6 connections support
    // IPv4 will still work:
    listen-on-v6 { any; };
    // Add this for no IPv4:
    listen-on { any; };

    allow-recursion { any; };
    allow-transfer { none; };
    allow-update { none; };

    version "Arch Linux x86_64";
    hostname "Arch Linux Server";
    server-id "ARCH_LINUX_SERVER";

    // 关闭DNSSEC验证
    dnssec-validation no;

    // 不返回NXDOMAIN
    auth-nxdomain no;

    // 设置缓存大小
    max-cache-size 512m;  // 512MB

    // 设置缓存记录的最大存活时间
    max-cache-ttl 43200;  // 12 小时

    // 设置缓存记录的最小存活时间
    min-cache-ttl 60;  // 1 分钟

    // 设置转发器
    forward first;
    forwarders {
        119.29.29.29;  // China Mobile DNS
        182.254.116.116;  // Baidu DNS
        180.76.76.76;  // Aliyun DNS
        8.8.8.8;  // Google Public DNS
        8.8.4.4;  // Google Public DNS
        223.5.5.5;  // Tencent DNS
        208.67.222.222;  // OpenDNS
    };

};

zone "localhost" IN {
    type master;
    file "localhost.zone";
};

zone "0.0.127.in-addr.arpa" IN {
    type master;
    file "127.0.0.zone";
};

zone "1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa" {
    type master;
    file "localhost.ip6.zone";
};

zone "arch.cn" {
    type master;
    file "arch.cn.zone";
};

zone "1.168.192.in-addr.arpa" {
    type master;
    file "192.168.1.zone";
};

//zone "example.org" IN {
//    type slave;
//    file "example.zone";
//    masters {
//        192.168.1.100;
//    };
//    allow-query { any; };
//    allow-transfer { any; };
//};

//logging {
//    channel xfer-log {
//        file "/var/log/named.log";
//            print-category yes;
//            print-severity yes;
//            severity info;
//        };
//        category xfer-in { xfer-log; };
//        category xfer-out { xfer-log; };
//        category notify { xfer-log; };
//};
```

github.com.conf

```
$TTL 3600
@       IN      SOA     ns1.example.com. admin.example.com. (
                       2024110501  ; Serial
                       604800      ; Refresh
                       86400       ; Retry
                       2419200     ; Expire
                       604800 )    ; Minimum TTL
           NS      ns1.example.com.
@       A       20.205.243.166
	A	20.27.177.113
	A	20.207.73.82
	A	4.237.22.38
	A	140.82.116.3
	A	140.82.116.4
	A	20.26.156.215
	A	140.82.114.3
	A	140.82.113.4
	A	140.82.112.4
	A	140.82.114.4
	A	20.201.28.151
ssh	A	20.205.243.160
```
